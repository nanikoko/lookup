<%@page import="kr.or.ddit.observers.vo.Ob_BoardVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LOOK UP</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="<%=request.getContextPath()%>/css/board.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="<%=request.getContextPath()%>/js/Observers.js"></script>


<style>
.mainContent{
	position: fixed;
	overflow: auto;
	border : 1px solid gray;
}

#footer{
    position: fixed;
    bottom: 0;
    clear: both;
    width: 100%;
    height: 80px;
    color : black;
    background-color: white;
}

.titleUl{
	border : 3px dotted gray;
	display: inline-flex;
	flex-direction: row;
	align-items: baseline;
	justify-content: space-evenly;
	
	width: 90%;
 	height: 200px;
 	position: absolute;
}


.subbox{
	margin-left: 70px;
	margin-top: 40px;
	padding: 5px;	
	
}
.titleBox{
	width: 80%;
	height: 200px;
	margin: 40px;
		
	padding: 10px;
}
.titleInline{
	display: flex;
	justify-content: space-between;
	width: 95%;
}

/* ëŒ“ê¸€ ì¶œë ¥ ê´€ë ¨ style*/
.CommentBox .comment_list .comment_nick_box {
    margin-bottom: 4px;
}

.CommentBox ul{
	display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
}
.comment_list ul{
	display: block;
    list-style-type: disc;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: 40px;
}

.CommentBox .comment_list .comment_text_box {
    position: relative;
    font-size: 13px;
    word-break: break-all;
    word-wrap: break-word;
}
.CommentBox .comment_list .comment_info_box {
    margin-top: 7px;
    font-size: 12px;
    color: var(--skinText979797);
}
.CommentBox .comment_list .comment_tool {
    position: absolute;
    top: 12px;
    right: 0;
}
.CommentBox .comment_list .comment_area {
    position: relative;
    padding: 12px 23px 10px 0;
}


dl, ol, ul {
    list-style: none;
    
}

.subbox a{
	color: black;
}


/* ëŒ“ê¸€ ì‘ì„± ê´€ë ¨ style  */
.CommentBox {
    margin-top: -17px;
    border-top: 1px solid #ebecef;
}
.CommentWriter {
    margin: 12px 0 29px;
    padding: 16px 10px 10px 18px;
    border: 2px solid rgba(0, 0, 0, 0.1);
    border-radius: 6px;
    box-sizing: border-box;
    background: #ffffff;
}
.CommentWriter .comment_inbox {
    position: relative;
    margin-bottom: 10px;
}
.blind {
    position: absolute;
    clip: rect(0 0 0 0);
    width: 1px;
    height: 1px;
    margin: -1px;
    overflow: hidden;
}
.CommentWriter .comment_inbox_name {
    display: block;
    margin-bottom: 10px;
    font-weight: 700;
    font-size: 13px;
}
textarea.comment_inbox_text[data-v-3b426d7d] {
    max-height: 500px;
}
.CommentWriter .comment_inbox_text {
    overflow-x: hidden;
    overflow-y: auto;
    display: block;
    width: 100%;
    min-height: 17px;
    padding-right: 1px;
    border: 0;
    font-size: 13px;
    -webkit-appearance: none;
    resize: none;
    box-sizing: border-box;
    background: transparent;
    color: #000000;
    outline: 0;
}
button, textarea {
    font-family: "Apple SD Gothic Neo", "ë§‘ì€ ê³ ë”•", "Malgun Gothic", ë‹ì›€, dotum, sans-serif;
}
.CommentWriter .comment_attach {
    position: relative;
}
.CommentWriter .register_box {
    float: right;
}
.CommentWriter .register_box .button {
    display: inline-block;
    min-width: 46px;
    height: 34px;
    line-height: 36px;
    font-size: 13px;
    color: #b7b7b7;
    border-radius: 6px;
    box-sizing: border-box;
    font-weight: 700;
    text-align: center;
    vertical-align: top;
}
.CommentWriter .comment_attach:after {
    content: "";
    display: block;
    clear: both;
}

/* ì‹ ì²­ ë§ˆê° ë²„íŠ¼ */
#checkClose{
	display: none;
}

/* ì‹ ì²­ ê´€ë ¨ ì •ë³´ë¥¼ ê°ì‹¼ div */
.appBox{
	text-align: center;
}

/* ì„œë¨¸ë…¸íŠ¸ ëª¨ë‹¬ ì¶©ëŒ ì–µì œ */
.note-modal-backdrop{
	z-index: -1;
}


</style>

<script>
<%
Ob_BoardVO vo1 = (Ob_BoardVO)request.getAttribute("boardInfo");
%>
$(function(){
	ObInfo = {}; // ê°ì²´
	memCheck = null;
	
	
	// ê´€ì¸¡íšŒ ëª¨ì§‘ í˜„ì¬ ì¸ì›ì„ ì¶œë ¥
	$.ajax({
		url : '<%=request.getContextPath()%>/observersServlet.do',
		type : 'post',
		data : {"check" : 21,
				"observerNum" : "<%=vo1.getOb_num()%>"},
		success : function(res){
			$('#nowNum').text(res);
			if(res >= <%=vo1.getOb_memnumber()%>){
				$('#modal_ob').hide();
				$('#checkClose').show();
			}
		},
		error : function(xhr){
			alert("ê´€ì¸¡íšŒ ëª¨ì§‘ í˜„ì¬ ì¸ì› ì¶œë ¥ ì˜¤ë¥˜ : " + xhr.status);
		},
		dataType : 'json'
		
	})
	
	// ê´€ì¸¡íšŒ ì‹ ì²­ì„ ëˆŒë €ì„ ë•Œ ì²˜ë¦¬
	// 1. ê´€ì¸¡íšŒ ì‹ ì²­ í…Œì´ë¸”ì— ì •ë³´ ì…ë ¥
	// 2. í•˜ë‚˜ì˜ ê´€ì¸¡íšŒì— ì´ë¯¸ ì‹ ì²­ëœ ì¸ì›ì€ ì¶”ê°€ ì‹ ì²­ ë¶ˆê°€
	$('#modal_ob').on('click', function(){
		
		ob_num = "<%=vo1.getOb_num()%>";// ê´€ì¸¡íšŒ ë²ˆí˜¸
		mem_id = "rsz5";// ì‹ ì²­ì ì•„ì´ë””(ì¶”í›„ ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€ê²½)
		
		ObInfo.ob_num = ob_num
		ObInfo.mem_id = mem_id
		ObInfo.check = 22
		
		obMeetingCheck();// ì´ë¯¸ ì‹ ì²­ëœ ì¸ì›ì¸ì§€ ì²´í¬
		
		memCheck = $('#appResult').text();
			
	})
	
	$('#ob_app').on('click', function(){
		console.log(memCheck);
		if(memCheck == 'ì„±ê³µ'){
			ObInfo.check = 23
			obApplication(); // ê´€ì¸¡íšŒ ì‹ ì²­ í…Œì´ë¸”ì— ì •ë³´ ì…ë ¥
		}
	})
	
	
})

</script>

</head>
<body>

<!-- ìƒë‹¨ë©”ë‰´ -->
	<header>
	<nav>
			<div id="topMenu" class="FF">
				<div class="title">
					<a href="<%=request.getContextPath()%>/main/main.jsp">
						<img class="titleImg" alt="ë©”ì¸ë°°ë„ˆR.png" src="<%=request.getContextPath()%>/images/ë©”ì¸ë°°ë„ˆR.png">
					</a>
				</div>

				<div class="dropdown FF topText">
					<a href="#" class="join">JOIN</a>
				</div>

				<div class="dropdown FF topText">
					<a href="#" class="login">LOGIN</a>
				</div>


				<div class="search">
					<input type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"> 
					<img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png">
				</div>



				<div class="dropdown FF ">
					<button id="notice" class="dropbtn FF ahover">
						<span class="dropbtn_icon"></span> ê³µì§€ì‚¬í•­
					</button>
					<div class="dropdown-content">
						<a href="#">ê³µì§€ì‚¬í•­</a> 
						<a href="#">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a> 
						<a href="#">1:1ë¬¸ì˜</a>
					</div>
				</div>

				<div class="dropdown FF">
					<button class="dropbtn FF ahover">
						<span class="dropbtn_icon"></span> ê²Œì‹œíŒ
					</button>
					<div class="dropdown-content">
						<a href="board(ê´€ì¸¡ê²Œì‹œíŒ).html">ê´€ì¸¡ê²Œì‹œíŒ</a> 
						<a href="board(ììœ ê²Œì‹œíŒ).html">ììœ ê²Œì‹œíŒ</a> 
						<a href="<%=request.getContextPath()%>/observersServletGet.do?check=10">ê´€ì¸¡íšŒê²Œì‹œíŒ</a>
					</div>
				</div>



			</div>
	</nav>
	</header>

	<aside>

		<ul>
			<li><a href="board(ê²Œì‹œíŒ).html">ê²Œì‹œíŒ</a></li>
			<li><a href="board(ê´€ì¸¡ê²Œì‹œíŒ).html">ê´€ì¸¡ê²Œì‹œíŒ</a></li>
			<li><a href="board(ììœ ê²Œì‹œíŒ).html">ììœ ê²Œì‹œíŒ</a></li>
			<li><a class="home" href="<%=request.getContextPath()%>/observersServletGet.do?check=10">ê´€ì¸¡íšŒê²Œì‹œíŒ</a></li>
		</ul>


	</aside>
	
	<!-- ìƒì„¸ ë‚´ì—­ ì¶œë ¥ ê³µê°„ -->
	<%
	Ob_BoardVO vo = (Ob_BoardVO)request.getAttribute("boardInfo");
	out.print("ê²Œì‹œíŒ ê¸€ ë²ˆí˜¸ : " + vo.getOb_no());
	%>
	
	
	<!-- ì œëª© -->
	<section>
		<div class="mainContent">
		  <div class="subbox">
		  	<h3> ğŸ”­ ê´€ì¸¡íšŒ ê²Œì‹œíŒ </h3> 
		  	<br>
	  	    <h2>ê¸€ ì œëª© ì¶œë ¥<%=vo.getTitle() %></h2>
	  	    <br>
	  	    <h6>ì‘ì„±ì : <%=vo.getMem_id() %></h6>
	  	    <div class="titleInline">
	  	    <h6 class="item">ì‘ì„± ì¼ì : <%=vo.getUpdate_date() %></h6>
	  	    </div>
		  </div>
		  <hr style="width: 92%"><br>
		  
		  <!-- ë‚´ìš© -->
		  <div class="subbox">
		  <p>ë‚´ìš© ì¶œë ¥<%=vo.getContent() %></p>
		  </div>
		  
		  <hr style="width: 92%">
		  
		  
		  <!-- ë‚¨ì€ ê´€ì¸¡íšŒ ì‹ ì²­ ì¸ì› í‘œì‹œ -->
		  <div class="subbox appBox">
		    <h4>í˜„ì¬ ì‹ ì²­ì¸ì› / ìµœëŒ€ ì‹ ì²­ ê°€ëŠ¥ ì¸ì›</h4>
		    <h5>  
  	  		  &lt;<span id="nowNum"></span> ëª… /
	  	    <span id="maxNum"><%=vo.getOb_memnumber() %>ëª…></span>
		    </h5>
		  
		  	<br>
		    <!-- ì‹ ì²­ ê²°ê³¼ -->
		    <div id="appResult" style="color:mediumvioletred;"></div>
	
		    <!-- ê´€ì¸¡íšŒ ì‹ ì²­ ë²„íŠ¼  -->
		    <div>
 	  	      <button type="button" id="modal_ob" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
	    	  ê´€ì¸¡íšŒ ì‹ ì²­í•˜ê¸°
	  	      </button>
	  	      <button type="button" id="checkClose" disabled class="btn btn-primary" data-toggle="modal" data-target="#myModal">
	  		  ì‹ ì²­ì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.
	  	      </button>
		    </div>
		  </div>
		  
		  
		<br><br><br><br><br><br>
		
		
        
        </div>
	</section>
	<footer id="footer">
 	  <div id="footer" class="FR">
    	<hr>
        (34055) ëŒ€ì „ê´‘ì—­ì‹œ ìœ ì„±êµ¬ ëŒ€ë•ëŒ€ë¡œ 776     ì „í™”: 080-373-3333(ë¬´ë£Œ) / 042-865-3333(ìœ ë£Œ)     ì²œë¬¸ì •ë³´ ARS: 042-865-3332     íŒ©ìŠ¤: 042-861-5610<br>
        Copyright (C) 2017 Korea Astronomy and Space Science Institute. All Rights Reserved.
      </div>
	</footer>
	
	 <!-- The Modal -->
  <div class="modal fade" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"><%=vo.getOb_num()%> ê´€ì¸¡íšŒì— ì°¸ê°€ë¥¼ ì‹ ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
        <h5><%=vo.getOb_num()%> ê´€ì¸¡íšŒì— ì°¸ê°€ë¥¼ ì‹ ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</h5>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal" id="ob_app">í™•ì¸</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>

</body>
</html>